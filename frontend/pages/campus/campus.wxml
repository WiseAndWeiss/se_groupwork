<!-- 自定义导航栏 -->
<view class="custom-navbar">
  <image class="alllist-icon" bindtap="goToAlllist" src="/assets/icons/question-circle.svg"></image>
  <view class="navbar-title">校内</view>
</view>

<!-- 搜索栏 -->
<view class="search-bar">
  <view class="search-box">
    <view class="search-inner">
      <image class="search-icon" src="/assets/icons/search.svg"></image>
      <input 
        type="text"
        placeholder="快速搜索动态"
        placeholder-class="search-placeholder"
        class="search-input"
      />
    </view>
  </view>
  <image class="filter-icon" bindtap="showFilterPopup" src="/assets/icons/filter.svg"></image>
</view>

<!-- 卡片独立滚动容器 -->
<scroll-view class="card-scroll" scroll-y="true">
  <view class="card-list">
    <block wx:for="{{filteredList}}" wx:key="id">
      <card-component
        title="{{item.title}}"
        author="{{item.author}}"
        time="{{item.time}}"
        tags="{{item.tags}}"
        desc="{{item.desc}}"
        url="{{item.url}}"
      />
    </block>
    <view wx:if="{{filteredList.length === 0}}" class="empty-tip">
      暂无匹配标签的动态
    </view>
  </view>
</scroll-view>

<!-- 标签筛选悬浮窗 -->
<view class="filter-mask" wx:if="{{isFilterShow}}" bindtap="hideFilterPopup"></view>
<view class="filter-popup" wx:if="{{isFilterShow}}">
  <view class="popup-header">
    <view class="popup-title">筛选</view>
  </view>

  <scroll-view class="tags-scroll" scroll-y="true">
    <view class="tags-wrapper">
      <view class="tag-group">
        <view class="group-title">标签</view>
        <view class="tag-row">
          <block wx:for="{{contentTags}}" wx:key="index">
            <view 
              class="tag-item {{selectedTag === item ? 'tag-selected' : ''}}"
              bindtap="selectTag"
              data-tag="{{item}}"
            >{{item}}</view>
          </block>
        </view>
      </view>

      <view class="tag-group">
        <view class="group-title">公众号</view>
        <view class="tag-row">
          <block wx:for="{{officialTags}}" wx:key="index">
            <view 
              class="tag-item {{selectedTag === item ? 'tag-selected' : ''}}"
              bindtap="selectTag"
              data-tag="{{item}}"
            >{{item}}</view>
          </block>
        </view>
      </view>
    </view>
  </scroll-view>
</view>

<!-- 底部导航栏 -->
<view class="tab-bar">
  <view class="tab-item" bindtap="goToHome">
    <image class="menu-icon" src="/assets/icons/home.svg"></image>
    <text class="tab-text">首页</text>
  </view>
  <view class="tab-item active">
    <image class="menu-icon" src="/assets/icons/campus.svg"></image>
    <text class="tab-text">校内</text>
  </view>
  <view class="tab-item" bindtap="goToSelection">
    <image class="menu-icon" src="/assets/icons/heart.svg"></image>
    <text class="tab-text">自选</text>
  </view>
  <view class="tab-item" bindtap="goToUser">
    <image class="menu-icon" src="/assets/icons/user2.svg"></image>
    <text class="tab-text">我的</text>
  </view>
</view>
