<!-- 顶部标题栏 -->
<view class="header">
  <view class="title-container">
    <image class="app-icon" src="/assets/icon.png" mode="widthFix"></image>
    <text class="app-name">小助手</text>
    <text class="app-desc">校内公众号信息整合助手</text>
  </view>
</view>

<!-- 登录/注册切换按钮 -->
<view class="tab-container">
  <view 
    class="tab {{isLogin ? 'active' : ''}}" 
    bindtap="switchToLogin"
  >
    登录
  </view>
  <view 
    class="tab {{!isLogin ? 'active' : ''}}" 
    bindtap="switchToRegister"
  >
    注册
  </view>
</view>

<!-- 登录表单 -->
<view class="form-container" wx:if="{{isLogin}}">
<view class="input-group">
<!-- <canvas id="canvas" type="2d"></canvas> -->
<input 
    class="input" 
    type="text" 
    placeholder="用户名" 
    value="{{loginData.username}}"
    bindinput="onLoginUsernameInput"
    bindfocus="onLoginUsernameFocus"
    adjust-position="{{true}}"
/>
</view>
<view class="input-group">
<input 
    class="input" 
    type="password" 
    placeholder="密码" 
    value="{{loginData.password}}"
    bindinput="onLoginPasswordInput"
    adjust-position="{{true}}"
/>
</view>
<button class="submit-btn" hover-class="btn-hover" bindtap="handleLogin">登录</button>
</view>

<!-- 注册表单 -->
<view class="form-container" wx:if="{{!isLogin}}">
  <view class="input-group">
    <input 
        class="input" 
        type="text" 
        placeholder="用户名" 
        value="{{registerData.username}}"
        bindinput="onRegisterUsernameInput"
        bindfocus="onRegisterUsernameFocus"
        adjust-position="{{true}}"
    />
  </view>

  <view class="input-group">
    <input 
        class="input" 
        type="password" 
        placeholder="输入密码" 
        value="{{registerData.password}}"
        bindinput="onRegisterPasswordInput"  
        bindfocus="scrollToStrength"
        adjust-position="{{true}}"
    />
  </view>

  <!-- 密码强度提示视图 -->
  <view class="password-strength" id="strength-anchor">
    <view class="strength-tip-item">● 密码由8-16位数字、字母或符号"!@#$%^&*"组成</view>
    <view class="strength-tip-item">● 至少含有两种及以上的字符</view>
    <view class="strength-text-row">
      <text class="strength-label">密码强度</text>
      <text class="strength-value {{strengthClass}}">{{passwordStrength}}</text>
    </view>
    <!-- 新增密码强度横条 -->
    <view class="strength-bar-container">
      <view class="strength-bar">
        <view class="bar-segment bar-weak {{strengthClass === 'strength-weak' ? 'active' : ''}}"></view>
        <view class="bar-segment bar-medium {{strengthClass === 'strength-medium' ? 'active' : ''}}"></view>
        <view class="bar-segment bar-strong {{strengthClass === 'strength-strong' ? 'active' : ''}}"></view>
      </view>
      <view class="strength-labels">
        <text class="strength-label-item {{strengthClass === 'strength-weak' ? 'active' : ''}}">弱</text>
        <text class="strength-label-item {{strengthClass === 'strength-medium' ? 'active' : ''}}">中</text>
        <text class="strength-label-item {{strengthClass === 'strength-strong' ? 'active' : ''}}">强</text>
      </view>
    </view>
  </view>

  <view class="input-group">
    <input 
        class="input" 
        type="password" 
        placeholder="确认密码" 
        value="{{registerData.confirmPassword}}"
        bindinput="onRegisterConfirmPasswordInput"
        adjust-position="{{true}}"
    />
  </view>

  <button class="submit-btn" hover-class="btn-hover" bindtap="handleRegister">注册并登录</button>
</view>

