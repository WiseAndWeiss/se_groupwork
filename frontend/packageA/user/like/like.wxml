<loading showLoading="{{showLoadingAnimation}}" />
<!-- 自定义导航栏 -->
<view class="custom-navbar">
  <!-- 返回上一页按钮 -->
  <image class="return-icon" bindtap="goBack" src="/assets/icons/return.svg"></image>
  <view class="navbar-title">我的收藏</view>
</view>

<view class="delete-bar">
  <view class="delete-all-btn" bindtap="deleteAllFavourite">
    <text class="delete-btn-text">删除全部</text>
  </view>
</view>

<!-- 收藏列表容器 -->
<view class="favourite-container">
  <!-- 空状态：无收藏时显示 -->
  <view wx:if="{{favouriteList.length === 0}}" class="empty-favourite">
    <image src="/assets/icons/star-empty.svg" class="empty-icon" mode="widthFix"></image>
    <text class="empty-text">暂无收藏</text>
    <text class="empty-tip">点击文章的收藏按钮添加喜欢的内容</text>
  </view>
  
  <!-- 有收藏内容时显示 -->
  <view wx:else class="favourite-content">
    <scroll-view class="card-scroll" scroll-y="true">
      <view class="favourite-list">
        <block wx:for="{{favouriteList}}" wx:key="id">
          <view class="favourite-item">
            <!-- 复用 card 组件展示收藏内容 -->
            <card-component
              class="card-component-{{index}}" 
              id_="{{item.article.id}}"
              title="{{item.article.title}}"
              time="{{item.article.publish_time}}"
              tags="{{item.article.tags}}"
              desc="{{item.article.summary}}"
              url="{{item.article.article_url}}"
              key_info="{{item.key_info}}"
              avatar="{{item.article.avatar}}"   
              name="{{item.article.account_name}}"   
              is_favorited="{{item.id}}"  
              data-isExpanded="{{false}}"
              bind:ready="initCardExpand"
            />
          </view>
        </block>
      </view>
    </scroll-view>
  </view>
</view>