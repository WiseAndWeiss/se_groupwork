version: '3.8' 

services:
  meilisearch:
    image: getmeili/meilisearch:latest
    container_name: meilisearch-se
    ports:
      - "7700:7700"
    volumes:
      - ./meili_data:/meili_data
      # if linux:- ./meili_data:/meili_data
    environment:
      # 关闭 API 密钥（本地开发无需验证，和你之前的配置一致）
      - MEILI_NO_ANALYTICS=true  # 关闭数据分析（可选，隐私保护）
      - MEILI_ENV=development    # 开发环境（默认，无需修改）
    # 重启策略：容器意外退出时自动重启（保证服务可用）
    restart: unless-stopped
    deploy:
      resources:
        limits:
          cpus: '1'        # 最多占用1核CPU
          memory: 512M     # 最多占用512MB内存